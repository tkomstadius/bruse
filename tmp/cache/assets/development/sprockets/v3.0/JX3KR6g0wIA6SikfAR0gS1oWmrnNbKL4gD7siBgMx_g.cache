I"{(function() {
  this.bruseApp.controller('DragDropCtrl', [
    '$scope', '$http', function($scope, $http) {
      $scope.droppedFiles = [];
      $scope.dataObjects = {};
      $scope.imageFiles = [];
      $scope.isDropped = false;
      $scope.isSaved = false;
      $scope.message = '';
      $scope.notSaved = '';
      return $scope.saveOpt = function(location) {
        if (location === '') {
          $scope.isDropped = false;
          $scope.droppedFiles = [];
          return $scope.notSaved = '';
        } else {
          $scope.isDropped = false;
          $scope.dataObjects.objects = $scope.droppedFiles;
          $scope.dataObjects.location = location;
          return _.each($scope.droppedFiles, function(file) {
            return $http.post('/upload_drop.json', {
              object: file,
              location: location
            }).then(function(response) {
              console.log(response.data.files);
              if (response.data.error !== []) {
                $scope.isSaved = true;
                return $scope.message = "Saved to " + location;
              } else {
                $scope.isSaved = false;
                return $scope.message = "Something went wrong";
              }
            })["catch"](function(response) {
              console.error("Couldn't save..");
            });
          });
        }
      };
    }
  ]);

}).call(this);
:ET