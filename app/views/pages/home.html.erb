<% if current_user.nil? %>
  <%= link_to 'Sign in with Dropbox', user_omniauth_authorize_path('dropbox_oauth2') %><br>
  <%= link_to 'Sign in with Google', user_omniauth_authorize_path('google_oauth2') %><br>
  <%= link_to 'Sign in', new_user_session_path %>
<% else %>
  <%= render 'files/create_text/create_from_textbox' %>
  <%= render 'search/home' %>
  <div style="border:solid" ng-controller="DragDropCtrl">
    <div b-dropzone the-files="droppedFiles" images="imageFiles" drop="isDropped" saved="isSaved" info="message" no-type="notSaved">
      <span>Put stuff here</span>
    </div>
    <div ng-show="isDropped">
      <!-- TODO: check strings for saving later -->
      <% current_user.identities.each do |identity| %>
        <button ng-click="saveOpt('<%= identity.id %>')"><%= identity.name %></button>
      <% end %>
      <button ng-click="saveOpt('')">Cancel</button>
    </div>
    <span>{{notSaved}}</span>
    <div ng-show="isSaved" ng-if="imageFiles">
      <div class="savedImages"ng-repeat="im in imageFiles">
        <img ng-src="{{im}}"/>
      </div>
      <span>{{message}}</span>
    </div>
  </div>
<% end %>

