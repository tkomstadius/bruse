<% if current_user.nil? %>
  <% User.nice_omniauth_providers.each do |provider| %>
    <%= link_to "Sign in with #{provider[:name].to_s.titleize}", user_omniauth_authorize_path(provider[:id]) %><br />
  <% end %>
  <%= link_to 'Sign in', new_user_session_path %>
<% else %>
  <%= render 'files/files/create_from_textbox' %>
  <%= render 'search/home' %>
  <div style="border:solid" ng-controller="DragDropCtrl">
    <div b-dropzone the-files="droppedFiles" images="imageFiles" drop="isDropped" saved="isSaved" info="message" no-type="notSaved">
      <span>Put stuff here</span>
    </div>
    <div ng-show="isDropped">
      <!-- TODO: check strings for saving later -->
      <%- User.nice_omniauth_providers.each do |provider| %>
        <button ng-click="saveOpt('<%= provider[:name].to_s.downcase %>')"><%= provider[:id].to_s.titleize %></button>
      <% end -%>
      <button ng-click="saveOpt('local')">Local</button>
      <button ng-click="saveOpt('')">Cancel</button>
    </div>
    <span>{{notSaved}}</span>
    <div ng-show="isSaved" ng-if="imageFiles">
      <div class="savedImages"ng-repeat="im in imageFiles">
        <img ng-src="{{im}}"/>
      </div>
      <span>{{message}}</span>
    </div>
  </div>
<% end %>
