<h1>Welcome#index</h1>
<p>Find me in app/views/welcome/index.html.erb</p>


<p id="notice"><%= notice %></p>

<h1>Listing Files</h1>



<%= form_tag(bruse_files_path, class: "form-inline", method: :get) do  %>
  <div class="form-group"></div>
  <%= label_tag(:query, "Search for:") %>
  <%= text_field_tag(:query, params[:query], class: "form-control" )%>
  <%= submit_tag("Search", class: "btn btn-primary" )%>
  <% if params[:query].present? %>
    <%= link_to "clear", bruse_files_path %>
  <% end %>
<% end %>

<%= form_tag tags_path, :method => 'get' do %>
  <%= label_tag(:search, "Search for:") %>
  <%= text_field_tag :search, params[:search] %>
  <%= submit_tag "Search", :name =>nil %>
<% end %>

<table>
  <thead>
    <tr>
      <th>File name</th>
      <th>File type</th>
      <th>Meta</th>
      <th>Tag</th>
      
      <th colspan="3"></th>
    </tr>
  </thead>

  

  <tbody>
    <% @bruse_files.each do |file| %>  
      <tr> 
        <td><%= file.name %></td>
        <td><%= file.filetype %></td>
        <td><%= file.meta %></td>
        <% file.tags.each do |t| %>
          <td><%= link_to t.name, t %> </td>
        <% end %>
        <td><%= link_to 'Destroy', file, method: :delete, data: { confirm: 'Are you sure?' } %></td>
      </tr>
    <% end %>




  </tbody>
</table>


<br>

<%= link_to 'New File', new_bruse_file_path %>